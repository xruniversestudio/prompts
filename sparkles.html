<!DOCTYPE html>
<html>
<head>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/3.3.2/aframe/build/aframe-ar.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aframe-particle-system-component@1.0.0/dist/aframe-particle-system-component.min.js"></script>
  <style>
    body { margin:0; overflow:hidden; }
    #startBtn {
      position: absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      background:#fff;
      border:none;
      padding:1em 2em;
      font-size:1.2em;
      z-index: 10;
      border-radius:5px;
      cursor:pointer;
    }
  </style>
</head>
<body>
  <button id="startBtn">Start Camera</button>
  <a-scene id="arScene" embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false" visible="false">
    <a-marker preset="hiro">
      <a-entity id="sparkles" position="0 0.2 0" visible="false"
        particle-system="enabled: false; 
                         texture: https://cdn.jsdelivr.net/gh/IdeaSpaceVR/aframe-particle-system-component@master/images/star2.png; 
                         color: #FFD700, #FFFFFF; 
                         size: 0.5, 0; 
                         velocityValue: 0 0.1 0; 
                         velocitySpread: 0.2 0.1 0.2; 
                         accelerationValue: 0 -0.01 0; 
                         blending: 2; 
                         particleCount: 150; 
                         maxAge: 3;">
      </a-entity>
    </a-marker>
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    const btn = document.querySelector('#startBtn');
    const scene = document.querySelector('#arScene');
    const spark = document.querySelector('#sparkles');

    btn.addEventListener('click', () => {
      // Show AR scene
      scene.setAttribute('visible', 'true');
      btn.style.display = 'none';
      
      // Wait for camera to initialize
      window.addEventListener('camera-init', () => {
        // Enable sparkles
        spark.setAttribute('visible', 'true');
        spark.setAttribute('particle-system', 'enabled', true);
      }, { once: true });
    });
  </script>
</body>
</html>